<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>-->
<style>
    div {
    width:500px;
    height:500px;
        border: dotted;
        border-color: lightgray;
    }
    </style>
    </head>
    <body>
    <div>
        Hello World
    </div>
    <button id="btn1">Start</button>
    <button id="btn2">Stop</button>

    <script>
        $(document).ready(function(){
            var colors=['red','blue','yellow'];
            var waits=[1000,3000,6000];
            var i=0;
            var t=[];
            var interval;
            function changeColor(){

                $('div').css('backgroundColor', colors[i]);
                i++;
                if(i>waits.length-1) i=0;

            }
            function applyColorChange(){

                for(var j=0;j<waits.length;j++){
                    (function(k){
                        console.log(waits[k]);
                        t[k]=setTimeout(changeColor,waits[k]);
                    })(j);

                }//end of for loop


            }
            $("#btn1").click(function(){
                i=0;
                changeColor();
                applyColorChange();
                interval =setInterval(applyColorChange,6000);



            });

            $("#btn2").click(function(){
                clearInterval(interval);
                for(var a=0;a<t.length;a++){
                    clearTimeout(t[a]);
                }
                $('div').css('backgroundColor', 'white');
            });


        });
    </script>


</body>
</html>
